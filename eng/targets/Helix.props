<Project>

    <Import Project="Helix.Common.props" />

    <ItemDefinitionGroup>
        <HelixContent>
            <CopyToBuildDirectory>Never</CopyToBuildDirectory>
            <CopyToPublishDirectory>Always</CopyToPublishDirectory>
        </HelixContent>
    </ItemDefinitionGroup>

    <PropertyGroup>
        <CreateHelixPayload>true</CreateHelixPayload>
        <IsWindowsHelixQueue>$(HelixTargetQueue.Contains('Windows'))</IsWindowsHelixQueue>
        <XunitConsoleRunnerDir Condition="'$(XunitConsole472Path)' != ''">$([System.IO.Path]::GetDirectoryName($(XunitConsole472Path)))</XunitConsoleRunnerDir>
    </PropertyGroup>

    <ItemGroup>
        <!-- Use all availible queues by default -->
        <HelixProjectTargetQueue Include="@(HelixAvailibleTargetQueue)" />
        <!-- Skip non windows queues for .NET Framework targets -->
        <HelixProjectTargetQueue Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework' AND '$(HelixProjectTargetQueue.Contains(Windows))' == 'false'" Remove="'%(HelixProjectTargetQueue.Identity)'" />
    </ItemGroup>

    <ItemGroup Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework'">
        <HelixContent Include="$(RepositoryRoot)eng\helix\xunit\runtests.cmd" />
        <HelixContent Include="$(XunitConsoleRunnerDir)/**/*" />
    </ItemGroup>

    <ItemGroup Condition="'$(TargetFrameworkIdentifier)' != '.NETFramework'">
        <HelixContent Include="$(RepositoryRoot)eng\helix\vstest\runtests.sh" />
        <HelixContent Include="$(RepositoryRoot)eng\helix\vstest\runtests.cmd" />
    </ItemGroup>

    <ItemGroup>
        <HelixContent Include="$(RepositoryRoot)eng\scripts\RunPowershell.cmd" />
    </ItemGroup>

</Project>
